(this.webpackJsonpreddit_display=this.webpackJsonpreddit_display||[]).push([[0],{22:function(e,t,n){e.exports=n(33)},27:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(5);n(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(1),s=n(2),o=n(3),d=n(4),l=n(8),u=n(7),h=n(17),p=n(18),b=n(19),f=n(20),v=n.n(f);function E(e){return function(t){return t(function(e){return{type:"REQUEST_POSTS",subreddit:e}}(e)),v()("https://www.reddit.com/r/".concat(e,".json")).then((function(e){return e.json()})).then((function(n){return t(function(e,t){return{type:"RECEIVE_POSTS",subreddit:e,posts:t.data.children.map((function(e){return e.data})),receivedAt:Date.now()}}(e,n))}))}}function m(e){return function(t,n){if(function(e,t){var n=e.postsBySubreddit[t];return console.log("posts in shouldFetchPosts",n),!n||!n.isFetching&&n.didInvalidate}(n(),e))return t(E(e))}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,didInvalidate:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVALIDATE_SUBREDDIT":return Object.assign({},e,{didInvalidate:!0});case"REQUEST_POSTS":return Object.assign({},e,{isFetching:!0,didInvalidate:!1});case"RECEIVE_POSTS":return Object.assign({},e,{isFetching:!1,didInvalidate:!1,items:t.posts,lastUpdated:t.receivedAt});default:return e}}var S=Object(u.b)({postsBySubreddit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVALIDATE_SUBREDDIT":case"RECEIVE_POSTS":case"REQUEST_POSTS":return Object.assign({},e,Object(b.a)({},t.subreddit,g(e[t.subreddit],t)));default:return e}},selectedSubreddit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reactjs",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_SUBREDDIT":return t.subreddit;default:return e}}}),O=Object(p.createLogger)(),j=n(6),y=function(e){Object(d.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange,a=e.options;return r.a.createElement("span",null,r.a.createElement("h1",null,t),r.a.createElement("select",{onChange:function(e){return n(e.target.value)},value:t},a.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))}}]),n}(a.Component),C=(n(32),function(e){Object(d.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Posts of ",this.props.posts[0].subreddit," are as follows"),r.a.createElement("ol",null,this.props.posts.map((function(e,t){return r.a.createElement("li",{key:t},e.author_fullname,":",e.title)}))))}}]),n}(a.Component)),I=function(e){Object(d.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(j.a)(a)),a.handleRefreshClick=a.handleRefreshClick.bind(Object(j.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.dispatch)(m(e.selectedSubreddit))}},{key:"componentDidUpdate",value:function(e){if(this.props.selectedSubreddit!==e.selectedSubreddit){var t=this.props;(0,t.dispatch)(m(t.selectedSubreddit))}}},{key:"handleChange",value:function(e){this.props.dispatch({type:"SELECT_SUBREDDIT",subreddit:e}),this.props.dispatch(m(e))}},{key:"handleRefreshClick",value:function(e){e.preventDefault();var t=this.props,n=t.dispatch,a=t.selectedSubreddit;n({type:"INVALIDATE_SUBREDDIT",subreddit:a}),n(m(a))}},{key:"render",value:function(){var e=this.props,t=e.selectedSubreddit,n=e.posts,a=e.isFetching,i=e.lastUpdated;return console.log("selectedSubreddit",t),r.a.createElement("div",null,r.a.createElement(y,{value:t,onChange:this.handleChange,options:["reactjs","frontend","Vuejs"]}),r.a.createElement("p",null,i&&r.a.createElement("span",null,"Last updated at ",new Date(i).toLocaleTimeString(),"."," "),!a&&r.a.createElement("button",{onClick:this.handleRefreshClick},"Refresh")),a&&0===n.length&&r.a.createElement("h2",null,"Loading..."),!a&&0===n.length&&r.a.createElement("h2",null,"Empty."),n.length>0&&r.a.createElement("div",{style:{opacity:a?.5:1}},r.a.createElement(C,{posts:n})))}}]),n}(a.Component);var T,k=Object(l.b)((function(e){var t=e.selectedSubreddit,n=e.postsBySubreddit[t]||{isFetching:!0,items:[]},a=n.isFetching,r=n.lastUpdated;return{selectedSubreddit:t,posts:n.items,isFetching:a,lastUpdated:r}}))(I),D=Object(u.c)(S,T,Object(u.a)(h.a,O)),w=function(e){Object(d.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(l.a,{store:D},r.a.createElement("div",{className:"App"},r.a.createElement(k,null)))}}]),n}(a.Component);Object(i.render)(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.e44e1173.chunk.js.map